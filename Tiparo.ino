/*****************************************************************************/
/*                                                                           */
/* Tiparo.ino                                                                */
/*                                                                           */
/*****************************************************************************/
/*                                                                           */
/* Description:                                                              */
/*                                                                           */
/*                                                                           */
/*****************************************************************************/

#include <Servo.h>

Servo servoX, servoY, servoZ;

int accelX = 0, accelY = 1, accelZ = 2;
int xPos, yPos, zPos;
int x, y, z;

int initialPos = 90;

/*****************************************************************************/
/*                                                                           */
/* setup()                                                                   */
/*                                                                           */
/*****************************************************************************/
void setup()
{
    Serial.begin( 9600 );
  
    servoX.attach( 6 );
    servoY.attach( 7 );

    servoX.write( initialPos );
    servoY.write( initialPos );
}

/*****************************************************************************/
/*                                                                           */
/* loop()                                                                    */
/*                                                                           */
/*****************************************************************************/
void loop()
{
    //testServos();
    
    xPos = analogRead( accelX );
    yPos = analogRead( accelY );
    zPos = analogRead( accelZ );
    x = map( xPos, 260, 400, 0, 180 );
    y = map( yPos, 260, 400, 0, 180 );
    Serial.print( xPos, DEC );
    Serial.print( "," );
    Serial.print( yPos, DEC );
    Serial.print( "," );
    Serial.print( zPos, DEC );
    Serial.print( "\n" );
    servoX.write( x );  
    servoY.write( y );
    delay( 150 );
}

/*****************************************************************************/
/*                                                                           */
/* testServos()                                                              */
/*                                                                           */
/*****************************************************************************/
void testServos()
{
int pos = 0;
    
    /*****************************************************************************/
    /* Servo X                                                                   */
    /*****************************************************************************/
    for( pos = 0; pos < 180; pos +=1 )
    {
        servoX.write( pos );
        delay( 15 );
    }

    for( pos = 180; pos >= 1; pos -= 1 )
    {
        servoX.write( pos );
        delay( 15 );
    }

    /*****************************************************************************/
    /* Servo Y                                                                   */
    /*****************************************************************************/
    for( pos = 0; pos < 180; pos +=1 )
    {
        servoY.write( pos );
        delay( 15 );
    }

    for( pos = 180; pos >= 1; pos -= 1 )
    {
        servoY.write( pos );
        delay( 15 );
    }
}

